---
# data_public_ip подставляет scripts/refresh-inventory.sh после terraform apply

ansible_user: deploy
ansible_connection: ssh
ansible_ssh_private_key_file: "~/.ssh/id_rsa_terraform"
# become: true — задачи выполняются с sudo (deploy имеет NOPASSWD)

data_public_ip: "87.228.9.133"

repo_url: "https://github.com/newton0512/PostgresqlResearch.git"
repo_ref: master

data_mount: /data
api_port: 3000

is_production: true

# postgres_password задаётся через all_secret.yml (см. all_secret.example.yml) или через env: export POSTGRES_PASSWORD='...'
# Не храните пароль в этом файле — он может попасть в git.

# Trino container 24G; heap 20G. max-memory-per-node + headroom(~30%) must be <= heap → max_mem ~14G
trino_heap_gb: 20
trino_max_direct_memory_gb: 16
trino_max_mem_gb: 14
trino_concurrency: 16
trino_max_worker_threads: 64

k6_api_url: "http://{{ data_public_ip }}:3000"
